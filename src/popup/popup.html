<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScanVui</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body data-theme="light">
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <img src="../../icons/icon48.png" alt="ScanVui" class="logo">
        <span class="app-name">ScanVui</span>
      </div>
      <div class="header-right">
        <button id="themeToggle" class="icon-btn" title="Chuy·ªÉn theme">
          <span class="icon-light">‚òÄÔ∏è</span>
          <span class="icon-dark">üåô</span>
        </button>
        <span class="version">v3.8.0</span>
      </div>
    </header>

    <!-- Main Action -->
    <div class="main-action">
      <button id="scanBtn" class="scan-btn">
        <span class="scan-icon">üîç</span>
        <span class="scan-text">Qu√©t trang</span>
      </button>
      <div id="pageInfo" class="page-info"></div>
    </div>

    <!-- Quick Actions Bar (always visible) -->
    <div class="quick-actions-bar">
      <button class="quick-action-btn" data-quick="screenshot" title="Ch·ª•p ·∫£nh trang">
        <span class="qa-icon">üì∏</span>
        <span class="qa-label">Ch·ª•p</span>
      </button>
      <button class="quick-action-btn" data-quick="crawler" title="T·∫£i website offline">
        <span class="qa-icon">üåê</span>
        <span class="qa-label">T·∫£i web</span>
      </button>
      <button class="quick-action-btn" data-quick="media" title="Qu√©t media">
        <span class="qa-icon">üñºÔ∏è</span>
        <span class="qa-label">Media</span>
      </button>
      <button class="quick-action-btn" data-quick="selector" title="Copy selector">
        <span class="qa-icon">üéØ</span>
        <span class="qa-label">Selector</span>
      </button>
    </div>

    <!-- Loading State -->
    <div id="loading" class="loading hidden">
      <div class="spinner"></div>
      <span>ƒêang ph√¢n t√≠ch...</span>
    </div>

    <!-- Error State -->
    <div id="error" class="error hidden">
      <span class="error-icon">‚ö†Ô∏è</span>
      <span id="errorMessage"></span>
    </div>

    <!-- Tab Navigation -->
    <nav id="tabNav" class="tab-nav hidden">
      <button class="tab-btn active" data-tab="results">
        <span class="tab-icon">üìä</span>
        <span class="tab-label">K·∫øt qu·∫£</span>
      </button>
      <button class="tab-btn" data-tab="tools">
        <span class="tab-icon">üõ†Ô∏è</span>
        <span class="tab-label">C√¥ng c·ª•</span>
      </button>
      <button class="tab-btn" data-tab="export">
        <span class="tab-icon">üì§</span>
        <span class="tab-label">Xu·∫•t</span>
      </button>
    </nav>

    <!-- Tab Content -->
    <div id="tabContent" class="tab-content hidden">
      
      <!-- Results Tab -->
      <div id="resultsTab" class="tab-panel active">
        <!-- Score Cards -->
        <div id="scoreCards" class="score-cards"></div>

        <!-- Issues List -->
        <div id="issuesList" class="issues-section">
          <div class="section-title">
            <span>‚ö†Ô∏è V·∫•n ƒë·ªÅ c·∫ßn s·ª≠a</span>
            <span id="issuesCount" class="badge">0</span>
          </div>
          <div id="issuesContent" class="issues-content"></div>
        </div>

        <!-- Quick Stats -->
        <div class="section-title standalone">üìà Th·ªëng k√™ nhanh</div>
        <div id="quickStats" class="quick-stats"></div>

        <!-- Detailed Sections (Collapsible) -->
        <div id="detailSections" class="detail-sections">
          <details class="detail-group">
            <summary>üè∑Ô∏è Meta & SEO</summary>
            <div id="metaDetail" class="detail-content"></div>
          </details>
          
          <details class="detail-group">
            <summary>üìù Forms & Inputs</summary>
            <div id="formsDetail" class="detail-content"></div>
          </details>
          
          <details class="detail-group">
            <summary>‚ôø Accessibility</summary>
            <div id="a11yDetail" class="detail-content"></div>
          </details>
          
          <details class="detail-group">
            <summary>üîß Chi ti·∫øt k·ªπ thu·∫≠t</summary>
            <div id="techDetail" class="detail-content"></div>
          </details>
        </div>
      </div>

      <!-- Tools Tab -->
      <div id="toolsTab" class="tab-panel">
        <!-- Tools Sub-tabs -->
        <div class="tools-subtabs">
          <button class="subtab-btn active" data-subtab="popular">‚≠ê Ph·ªï bi·∫øn</button>
          <button class="subtab-btn" data-subtab="dev">üõ†Ô∏è Dev</button>
          <button class="subtab-btn" data-subtab="testing">üß™ Testing</button>
        </div>

        <!-- Popular Tools (Screenshot, Crawler, Media) -->
        <div class="tools-subtab-content active" data-subtab-content="popular">
          <div class="tools-grid">
            <!-- Screenshot Tool -->
            <div class="tool-card" data-tool="screenshot">
              <div class="tool-header">
                <span class="tool-icon">üì∏</span>
                <span class="tool-name">Ch·ª•p ·∫£nh trang</span>
              </div>
              <p class="tool-desc">Ch·ª•p to√†n b·ªô ho·∫∑c ph·∫ßn hi·ªÉn th·ªã c·ªßa trang web</p>
              
              <div class="screenshot-options">
                <div class="option-group">
                  <label class="option-label">Ch·∫ø ƒë·ªô:</label>
                  <div class="screenshot-modes">
                    <button class="mode-btn active" data-mode="full" title="Ch·ª•p to√†n b·ªô trang">üìÑ To√†n trang</button>
                    <button class="mode-btn" data-mode="visible" title="Ch·ª•p ph·∫ßn ƒëang hi·ªÉn th·ªã">üëÅÔ∏è Visible</button>
                  </div>
                </div>
                
                <div class="option-group">
                  <label class="option-label">ƒê·ªãnh d·∫°ng:</label>
                  <div class="format-options">
                    <label class="format-radio">
                      <input type="radio" name="screenshotFormat" value="png" checked>
                      <span>PNG</span>
                    </label>
                    <label class="format-radio">
                      <input type="radio" name="screenshotFormat" value="jpeg">
                      <span>JPEG</span>
                    </label>
                  </div>
                </div>
                
                <div class="option-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="hideFixedElements" checked>
                    <span>·∫®n header/footer c·ªë ƒë·ªãnh</span>
                  </label>
                </div>
              </div>
              
              <div id="screenshotProgress" class="screenshot-progress hidden">
                <div class="progress-text">
                  <span id="progressLabel">ƒêang ch·ª•p...</span>
                  <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                  <div id="progressFill" class="progress-fill"></div>
                </div>
              </div>
              
              <div id="screenshotPreview" class="screenshot-preview hidden">
                <img id="previewImage" alt="Preview">
                <div class="preview-info">
                  <span id="previewSize"></span>
                </div>
              </div>
              
              <div class="tool-actions">
                <button class="tool-btn primary" id="captureScreenshot">üì∏ Ch·ª•p ·∫£nh</button>
                <button class="tool-btn" id="downloadScreenshot" disabled>üíæ T·∫£i v·ªÅ</button>
                <button class="tool-btn" id="copyScreenshot" disabled>üìã Copy</button>
              </div>
            </div>

            <!-- Website Crawler -->
            <div class="tool-card tool-card-large" data-tool="crawler">
              <div class="tool-header">
                <span class="tool-icon">üåê</span>
                <span class="tool-name">T·∫£i Website Offline</span>
              </div>
              <p class="tool-desc">T·∫£i to√†n b·ªô website v·ªÅ th∆∞ m·ª•c Downloads</p>
              <div class="crawler-features-note">
                <span>‚ú® T·ª± ƒë·ªông fix l·ªói ch·ªØ b·ªã che khu·∫•t</span>
                <span>‚úÇÔ∏è M·ªü file offline ‚Üí Visual Editor: di chuy·ªÉn, resize, x√≥a, s·ª≠a text, ƒë·ªïi style</span>
              </div>
              
              <div class="crawler-simple-settings">
                <div class="crawler-setting-row">
                  <label>ƒê·ªô s√¢u (level):</label>
                  <select id="crawlerDepth" class="crawler-select">
                    <option value="1">1 - Ch·ªâ trang hi·ªán t·∫°i + links tr·ª±c ti·∫øp</option>
                    <option value="2" selected>2 - Trang con + trang ch√°u</option>
                    <option value="3">3 - S√¢u h∆°n</option>
                    <option value="5">5 - R·∫•t s√¢u</option>
                    <option value="0">‚àû - Kh√¥ng gi·ªõi h·∫°n</option>
                  </select>
                </div>
                <div class="crawler-setting-row">
                  <label>S·ªë trang t·ªëi ƒëa:</label>
                  <select id="crawlerMaxPages" class="crawler-select">
                    <option value="20">20 trang</option>
                    <option value="50" selected>50 trang</option>
                    <option value="100">100 trang</option>
                    <option value="500">500 trang</option>
                    <option value="1000">1000 trang</option>
                  </select>
                </div>
              </div>
              
              <div id="crawlerProgress" class="crawler-progress hidden">
                <div class="crawler-progress-header">
                  <span id="crawlerProgressLabel">ƒêang chu·∫©n b·ªã...</span>
                  <span id="crawlerProgressPercent">0%</span>
                </div>
                <div class="crawler-progress-bar">
                  <div id="crawlerProgressFill" class="crawler-progress-fill"></div>
                </div>
                <div class="crawler-stats">
                  <span>üìÑ <span id="crawlerPagesCount">0</span> trang</span>
                  <span>üñºÔ∏è <span id="crawlerImagesCount">0</span> ·∫£nh</span>
                </div>
                <div id="crawlerCurrentUrl" class="crawler-current-url"></div>
              </div>
              
              <div id="crawlerResult" class="crawler-result hidden">
                <div class="crawler-result-summary">
                  <span>‚úÖ Ho√†n th√†nh!</span>
                  <span id="crawlerResultInfo"></span>
                </div>
                <div class="crawler-result-path">
                  üìÅ ƒê√£ l∆∞u v√†o: <strong>Downloads/<span id="crawlerFolderName"></span>/</strong>
                </div>
                <button class="tool-btn" id="redownloadCrawler" style="margin-top: 8px; width: 100%;">üì• T·∫£i l·∫°i files (n·∫øu thi·∫øu)</button>
              </div>
              
              <div class="tool-actions">
                <button class="tool-btn primary" id="startCrawler">üåê B·∫Øt ƒë·∫ßu t·∫£i</button>
                <button class="tool-btn" id="stopCrawler" disabled>‚èπÔ∏è D·ª´ng</button>
              </div>
            </div>

            <!-- Media Scanner -->
            <div class="tool-card" data-tool="media">
              <div class="tool-header">
                <span class="tool-icon">üñºÔ∏è</span>
                <span class="tool-name">Media Scanner</span>
              </div>
              <p class="tool-desc">T√¨m v√† t·∫£i h√¨nh ·∫£nh, video</p>
              <div id="mediaSummary" class="media-summary"></div>
              <div id="mediaList" class="media-list"></div>
              <div class="tool-actions">
                <button class="tool-btn primary" id="scanMedia">Qu√©t media</button>
                <button class="tool-btn" id="downloadAllMedia" disabled>T·∫£i t·∫•t c·∫£</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Dev Tools (Selector, Tech Stack, X-Ray) -->
        <div class="tools-subtab-content" data-subtab-content="dev">
          <div class="tools-grid">
            <!-- Selector Picker -->
            <div class="tool-card" data-tool="selector">
              <div class="tool-header">
                <span class="tool-icon">üéØ</span>
                <span class="tool-name">Copy Selector</span>
              </div>
              <p class="tool-desc">L·∫•y CSS/XPath/Playwright selector</p>
              <div id="selectorResult" class="selector-result hidden">
                <div class="selector-row">
                  <span class="selector-label">CSS:</span>
                  <code id="cssSelector">-</code>
                  <button class="copy-mini" data-copy="css" aria-label="Copy CSS selector">üìã</button>
                </div>
                <div class="selector-row">
                  <span class="selector-label">XPath:</span>
                  <code id="xpathSelector">-</code>
                  <button class="copy-mini" data-copy="xpath" aria-label="Copy XPath">üìã</button>
                </div>
                <div class="selector-row">
                  <span class="selector-label">Playwright:</span>
                  <code id="playwrightSelector">-</code>
                  <button class="copy-mini" data-copy="playwright" aria-label="Copy Playwright selector">üìã</button>
                </div>
              </div>
              <div class="tool-actions">
                <button class="tool-btn primary" id="pickElement" aria-label="Ch·ªçn element t·ª´ trang">Ch·ªçn element</button>
              </div>
            </div>

            <!-- Tech Stack -->
            <div class="tool-card" data-tool="techstack">
              <div class="tool-header">
                <span class="tool-icon">‚öôÔ∏è</span>
                <span class="tool-name">Tech Stack</span>
              </div>
              <p class="tool-desc">Ph√°t hi·ªán frameworks & th∆∞ vi·ªán</p>
              <div id="techStackResult" class="techstack-result"></div>
              <div class="tool-actions">
                <button class="tool-btn primary" id="detectTech">Ph√°t hi·ªán</button>
              </div>
            </div>

            <!-- X-Ray Vision -->
            <div class="tool-card" data-tool="xray">
              <div class="tool-header">
                <span class="tool-icon">üëÅÔ∏è</span>
                <span class="tool-name">X-Ray Vision</span>
              </div>
              <p class="tool-desc">Highlight elements tr√™n trang theo lo·∫°i</p>
              <div class="tool-options xray-options">
                <label><input type="checkbox" data-xray="forms" checked> Forms</label>
                <label><input type="checkbox" data-xray="inputs" checked> Inputs</label>
                <label><input type="checkbox" data-xray="buttons" checked> Buttons</label>
                <label><input type="checkbox" data-xray="links"> Links</label>
                <label><input type="checkbox" data-xray="headings"> Headings</label>
                <label><input type="checkbox" data-xray="images"> Images</label>
              </div>
              <div class="tool-actions">
                <button class="tool-btn primary" id="xrayApply" aria-label="B·∫≠t X-Ray Vision">B·∫≠t X-Ray</button>
                <button class="tool-btn" id="xrayClear" aria-label="T·∫Øt X-Ray Vision">T·∫Øt</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Testing Tools (Form Filler, Responsive, A11y) -->
        <div class="tools-subtab-content" data-subtab-content="testing">
          <div class="tools-grid">
            <!-- Form Filler -->
            <div class="tool-card" data-tool="formfiller">
              <div class="tool-header">
                <span class="tool-icon">üß™</span>
                <span class="tool-name">Form Filler</span>
              </div>
              <p class="tool-desc">T·ª± ƒë·ªông ƒëi·ªÅn form v·ªõi d·ªØ li·ªáu test</p>
              <div class="tool-options">
                <select id="fillLocale">
                  <option value="vi">Ti·∫øng Vi·ªát</option>
                  <option value="en">English</option>
                </select>
                <select id="fillMode">
                  <option value="realistic">Th·ª±c t·∫ø</option>
                  <option value="random">Ng·∫´u nhi√™n</option>
                  <option value="edge">Edge cases</option>
                </select>
              </div>
              <div class="tool-actions">
                <button class="tool-btn primary" id="fillForms">ƒêi·ªÅn form</button>
                <button class="tool-btn" id="clearForms">X√≥a</button>
              </div>
            </div>

            <!-- Responsive Test -->
            <div class="tool-card" data-tool="responsive">
              <div class="tool-header">
                <span class="tool-icon">üì±</span>
                <span class="tool-name">Responsive</span>
              </div>
              <p class="tool-desc">Test v·ªõi c√°c k√≠ch th∆∞·ªõc m√†n h√¨nh</p>
              <div class="viewport-buttons">
                <button class="viewport-btn" data-w="375" data-h="667">iPhone SE</button>
                <button class="viewport-btn" data-w="390" data-h="844">iPhone 14</button>
                <button class="viewport-btn" data-w="768" data-h="1024">iPad</button>
                <button class="viewport-btn" data-w="1920" data-h="1080">Desktop</button>
              </div>
            </div>

            <!-- A11y Simulator -->
            <div class="tool-card" data-tool="a11y">
              <div class="tool-header">
                <span class="tool-icon">‚ôø</span>
                <span class="tool-name">A11y Simulator</span>
              </div>
              <p class="tool-desc">M√¥ ph·ªèng c√°c d·∫°ng khi·∫øm th·ªã</p>
              <div class="sim-buttons">
                <button class="sim-btn" data-sim="protanopia">üî¥ M√π ƒë·ªè</button>
                <button class="sim-btn" data-sim="deuteranopia">üü¢ M√π xanh l√°</button>
                <button class="sim-btn" data-sim="tritanopia">üîµ M√π xanh</button>
                <button class="sim-btn" data-sim="achromatopsia">‚ö´ M√π m√†u</button>
                <button class="sim-btn" data-sim="blurry">üëì M·ªù</button>
              </div>
              <div class="tool-actions">
                <button class="tool-btn" id="resetA11y">Kh√¥i ph·ª•c</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Export Tab -->
      <div id="exportTab" class="tab-panel">
        <div class="export-section">
          <h3>üì• T·∫£i b√°o c√°o</h3>
          <div class="export-grid">
            <button class="export-btn" data-format="html">
              <span class="export-icon">üåê</span>
              <span class="export-name">HTML</span>
              <span class="export-desc">B√°o c√°o ƒë·∫πp</span>
            </button>
            <button class="export-btn" data-format="markdown">
              <span class="export-icon">üìù</span>
              <span class="export-name">Markdown</span>
              <span class="export-desc">Cho GitHub</span>
            </button>
            <button class="export-btn" data-format="json">
              <span class="export-icon">üì¶</span>
              <span class="export-name">JSON</span>
              <span class="export-desc">D·ªØ li·ªáu th√¥</span>
            </button>
            <button class="export-btn" data-format="csv">
              <span class="export-icon">üìä</span>
              <span class="export-name">CSV</span>
              <span class="export-desc">Cho Excel</span>
            </button>
          </div>
        </div>

        <div class="export-section">
          <h3>üìã Sao ch√©p nhanh</h3>
          <div class="quick-copy">
            <button class="copy-btn" id="copyJSON">üìã Copy JSON</button>
            <button class="copy-btn" id="copyMarkdown">üìÑ Copy Markdown</button>
            <button class="copy-btn" id="copySummary">üìä Copy t√≥m t·∫Øt</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Welcome Screen (shown when no scan) -->
    <div id="welcomeScreen" class="welcome">
      <div class="welcome-content">
        <div class="welcome-icon">üîç</div>
        <h2>Ch√†o m·ª´ng ƒë·∫øn ScanVui!</h2>
        <p>C√¥ng c·ª• ki·ªÉm tra SEO & Accessibility</p>
        <div class="welcome-steps">
          <div class="step">
            <span class="step-num">1</span>
            <span>M·ªü trang web c·∫ßn ki·ªÉm tra</span>
          </div>
          <div class="step">
            <span class="step-num">2</span>
            <span>Nh·∫•n <strong>Qu√©t trang</strong></span>
          </div>
          <div class="step">
            <span class="step-num">3</span>
            <span>Xem k·∫øt qu·∫£ v√† s·ª≠a l·ªói</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
